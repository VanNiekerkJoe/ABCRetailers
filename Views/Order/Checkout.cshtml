@model ABCRetailers.Models.Order
@{
    ViewData["Title"] = "Checkout Confirmation";
}

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card shadow-lg border-0">
                <div class="card-header bg-success text-white text-center py-4">
                    <h2><i class="fas fa-check-circle"></i> Order Confirmed!</h2>
                </div>
                <div class="card-body p-5">
                    <div class="text-center mb-4">
                        <h4>Thank you for your order!</h4>
                        <p class="text-muted">Order ID: <strong>@Model.Id</strong></p>
                        <p class="text-muted">Order Number: <strong>@Model.OrderNumber</strong></p>
                    </div>

                    <hr />

                    <div class="row g-4">
                        <div class="col-md-6">
                            <h5><i class="fas fa-truck"></i> Shipping To</h5>
                            <p>
                                @if (ViewBag.CustomerName != null)
                                {
                                    <strong>@ViewBag.CustomerName</strong>
                                
                                    <br>
                                }
                                @Model.ShippingAddress
                            </p>
                        </div>
                        <div class="col-md-6">
                            <h5><i class="fas fa-box"></i> Order Details</h5>
                            @if (Model.OrderItems != null && Model.OrderItems.Any())
                            {
                                foreach (var item in Model.OrderItems)
                                {
                                    <div class="border-bottom pb-2 mb-2">
                                        <p class="mb-1">
                                            <strong>@item.ProductName</strong><br>
                                            Quantity: <strong>@item.Quantity</strong><br>
                                            Unit Price: <strong>R @item.UnitPrice</strong><br>
                                            Line Total: <strong>R @item.TotalPrice</strong>
                                        </p>
                                    </div>
                                }
                            }
                            else
                            {
                                <p class="text-muted">No order items found</p>
                            }
                        </div>
                    </div>

                    <div class="row mt-3">
                        <div class="col-md-6">
                            <h5><i class="fas fa-credit-card"></i> Payment Information</h5>
                            <p>
                                Payment Method: <strong>@Model.PaymentMethod</strong><br>
                                Payment Status: <span class="badge bg-success">@Model.PaymentStatus</span>
                            </p>
                        </div>
                        <div class="col-md-6">
                            <h5><i class="fas fa-info-circle"></i> Order Status</h5>
                            <p>
                                Status: <span class="badge bg-primary">@Model.OrderStatus</span><br>
                                Ordered On: <strong>@Model.OrderedAt.ToString("yyyy-MM-dd HH:mm")</strong>
                            </p>
                        </div>
                    </div>

                    <hr />

                    <div class="row">
                        <div class="col-md-8">
                            <div class="row text-end">
                                <div class="col-6">Subtotal:</div>
                                <div class="col-6">R @Model.Subtotal</div>

                                @if (Model.TaxAmount > 0)
                                {
                                    <div class="col-6">Tax:</div>
                                    <div class="col-6">R @Model.TaxAmount</div>
                                }

                                @if (Model.ShippingAmount > 0)
                                {
                                    <div class="col-6">Shipping:</div>
                                    <div class="col-6">R @Model.ShippingAmount</div>
                                }

                                @if (Model.DiscountAmount > 0)
                                {
                                    <div class="col-6">Discount:</div>
                                    <div class="col-6">-R @Model.DiscountAmount</div>
                                }

                                <div class="col-6"><strong>Total Amount:</strong></div>
                                <div class="col-6"><strong class="text-success">R @Model.TotalAmount</strong></div>
                            </div>
                        </div>
                    </div>

                    <div class="text-center mt-4">
                        <a asp-controller="Home" asp-action="Index" class="btn btn-primary btn-lg me-3">
                            <i class="fas fa-home"></i> Back to Dashboard
                        </a>
                        <a asp-controller="Order" asp-action="Details" asp-route-id="@Model.Id" class="btn btn-outline-primary btn-lg">
                            <i class="fas fa-eye"></i> View Order Details
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>